<div *ngIf="cartelera" id="content-create-post" fxLayout="column" [ngClass.xs]="'components-container-xs'" fxLayoutGap="20px">
  <div fxFlex class="input-component-holder mat-elevation-z4">
    <mat-toolbar class="input-header">
      <h1 class="mat-headline center-align">Crear Publicación</h1>
    </mat-toolbar>

    <div class="input-container">

      <form [formGroup]="createPostForm" (ngSubmit)="createPost()" autocomplete="on">

        <div fxLayout="row" fxLayout.lt-sm="column" fxLayoutGap="20px">

          <div fxFlex.xs="100" fxFlex.lg="50" fxFlex.md="50" fxFlex.sm="50">
            <h4 class="mat-subheading-2 center-align">Ingrese un título</h4>
            <mat-divider></mat-divider>
            <mat-form-field>
              <input matInput type="text" formControlName="title" placeholder="Título">
            </mat-form-field>
            <div *ngIf="submitted && form.title.errors">
              <mat-error *ngIf="form.title.errors.required">El título es obligatorio</mat-error>
              <mat-error *ngIf="form.title.errors.minlength">El título debe tener al menos 3 caracteres</mat-error>
              <mat-error *ngIf="form.title.errors.maxlength">El título debe tener a lo sumo 50 caracteres</mat-error>
            </div>
          </div>

          <div fxFlex.xs="100" fxFlex.lg="50" fxFlex.md="50" fxFlex.sm="50">
            <h4 class="mat-subheading-2 center-align">Ingrese una descripción</h4>
            <mat-divider></mat-divider>
            <mat-form-field>
              <textarea matInput formControlName="description" placeholder="Descripción" matTextareaAutosize matAutosizeMinRows="2"
              matAutosizeMaxRows="5"></textarea>
            </mat-form-field>
            <div *ngIf="submitted && form.description.errors">
              <mat-error *ngIf="form.description.errors.required">La descripción es obligatoria</mat-error>
              <mat-error *ngIf="form.description.errors.minlength">La descripción debe tener al menos 10 caracteres</mat-error>
              <mat-error *ngIf="form.description.errors.maxlength">La descripción debe tener a lo sumo 1000 caracteres</mat-error>
            </div>
          </div>

          <div fxFlex.xs="100" fxFlex.lg="50" fxFlex.md="50" fxFlex.sm="50" id="imageUrl">
            <h4 class="mat-subheading-2 center-align">Seleccione una imagen</h4>
            <mat-divider></mat-divider>
            <input id="imageInput" type="file" formControlName="image" (change)="upload($event)" accept="image/*" #fileInput>
            <button mat-raised-button id="imageButton" type="button" color="primary" (click)="fileInput.click()">Seleccionar Imagen</button>
            <div *ngIf="!loading && !loaded">La imagen es opcional</div>
            <div *ngIf="!loading && loaded">{{ this.imageUrl }}</div>
            <div *ngIf="loading" aling="center">Cargando imagen, por favor espere...</div>
            <mat-progress-bar mode="indeterminate" *ngIf="loading"></mat-progress-bar>
          </div>

          <div fxFlex.xs="100" fxFlex.lg="50" fxFlex.md="50" fxFlex.sm="50">
              <h4 class="mat-subheading-2 center-align">Comentarios</h4>
              <mat-divider></mat-divider>
            <mat-slide-toggle formControlName="comments_enabled" color="primary">Habilitar comentarios</mat-slide-toggle>
          </div>

        </div>

        <div id="posMatDivider">
          <mat-divider></mat-divider>
        </div>

        <div class="optionButtons">
          <button mat-raised-button id="confirmButton" type="submit" color="primary">Confirmar</button>
          <button mat-raised-button id="cancelButton" color="primary" [routerLink]="['/cartelera', idCartelera]">Cancelar</button>
        </div>

      </form>

    </div>

  </div>
</div>

<div class="spinner-container" *ngIf="!cartelera">
  <mat-spinner class="spinner-content"></mat-spinner>
</div>
